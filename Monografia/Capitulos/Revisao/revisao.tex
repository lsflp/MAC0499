
\chapter{Revisão de Crenças}

\lettrine{A}{} área de pesquisa que trata do reparo de uma ontologia quando ela fica inconsistente é conhecida como Revisão de Crenças, que dá nome a este capítulo. Como escrito anteriormente, uma ontologia (ou um sistema de crenças) fica inconsistente quando alguma informação $ \alpha $, que é incompatível com o conhecimento já existente, chega até a base de conhecimento estudada. 

De uma forma geral, esse campo da pesquisa de Inteligência Artificial estuda qualquer alteração de estados epistêmicos, desde a simples adição de algum novo conhecimento que não entra em conflito com o que já está na ontologia. Além disso, ele lida também com a remoção segura de alguma informação, ou seja, quando ela é removida, não pode ser inferida.

O estado epistêmico de um agente nada mais é do que o conjunto de tudo o que ele acredita e como elas se relacionam num certo instante. Pode-se entender um estado epistêmico também como uma representação idealizada do estado cognitivo de um agente em determinado momento, como explicou Gärdenfors \cite{revisaoGardenfors}.

Uma alteração do estado epistêmico seria, portanto, uma revisão que acontece quando o agente recebe uma nova informação que entra em choque com as informações que ele possui no estado epistêmico atual. Essa revisão deve manter as crenças antigas ao máximo, fazendo assim, uma mudança mínima.

O paradigma AGM, que será usada neste trabalho, recebe este nome por causa dos autores do artigo considerado o pontapé inicial desta área de pesquisa \cite{revisaoAGM}. Nela, os estados de crenças são representados por conjuntos logicamente fechados de sentenças, ou seja, conjuntos $ K $ tais $ K = \text{Cn}(K) $, onde $ \text{Cn}(K) $ representa o conjunto de todas as consequências lógicas que $ K $. Quando $ K = \text{Cn}(K) $, diz-se que há um equilíbrio dos estados epistêmicos. Com $ K $ sendo logicamente fechado, se $ K \vdash \psi $, sendo $ \psi $ uma sentença qualquer, tem-se que $ \psi \in K $

As sentenças citadas acima são de uma lógica $ (L, \text{Cn}) $, tal que $ L $ é uma linguagem fechada em relação aos conectivos lógicos $ \land $, $ \lor $, $ \to $ e $ \lnot $ e que satisfaz:

\begin{description}
	\item[Tarskianicidade] a lógica é monotônica (todas as consequências dedutíveis continuam assim mesmo após a adição de alguma sentença que não interfere nessa dedução), idempotente e satisfaz inclusão;
	\item[Dedução] $ \alpha \in \text{Cn}(K) $ se e somente se $ \beta \to \alpha \in \text{Cn}(K) $, onde $ \alpha $ e $ \beta $ são sentenças lógicas;
	\item[Compacidade] se $ \alpha \in Cn(K) $, então existe $ K’ \subseteq K $ finito tal que $ \alpha \in \text{Cn}(K’) $;
	\item[Supraclassicalidade] toda consequência da lógica $ (L, \text{Cn}) $ é também uma consequência da lógica proposicional.
\end{description} 

Para verificar que a área de Revisão de Crenças possui seus estudos válidos, seja o seguinte exemplo do assunto da ontologia descrita neste trabalho, assumindo que ela possui os fragmentos de conhecimento abaixo em alguma linguagem formal de representação, e que ela está consistente e equilibrada, epistemicamente.

\begin{enumerate}
	\item \textit{Toda música brasileira pertence ao subgênero MPB;}
	\item \textit{Todos os cantores brasileiros cantam músicas brasileiras;}
	\item \textit{Ivete Sangalo é uma cantora brasileira;}
	\item \textit{Ivete Sangalo canta a música "Sorte Grande".}
\end{enumerate}

Com esse conjunto de informações, é possível inferir que a música "Sorte Grande" pertence ao subgênero MPB. No entanto, suponha que a seguinte informação chegue até o agente:

\begin{center}
	\textit{A música "Sorte Grande" pertence ao subgênero Axé.}
\end{center}

Como pode-se ver, a nova informação entra em choque direto com a inferência realizada. As maneiras de reparar a ontologia e qual delas escolher para fazê-lo serão descritas nesse capítulo.

\section{Tratamento da informação}

Antes de ver como é possível tratar as inconsistências causadas pela entrada de alguma informação nova, é necessário observar como uma sentença $ \alpha $ qualquer é tratada em algum conjuntos de crenças $ K $.

Existem três tipo de tratamento, a serem descritos abaixo:

\begin{enumerate}
	\item $ \alpha $ é aceita pelo conjunto de crenças. Isso pode acontecer de duas maneiras diferentes:
	\begin{enumerate}
		\item $ \alpha $ é aceita explicitamente. Quando isso acontece, temos que $ \alpha \in K $;
		\item $ \alpha $ é aceita implicitamente. Esse caso ocorre quando $ \alpha \in \text{Cn}(K) \setminus K $.
	\end{enumerate}
	\item $ \alpha $ é rejeitada. Aqui, temos que $ \lnot \alpha \in K $. 
	\item $ \alpha $ é indeterminada. Deste modo, $ K $ não possui conhecimento sobre a sentença $ \alpha $, assim, $ \lnot \alpha \notin K $ e $ \alpha \notin K $.
\end{enumerate}

Existem também algumas questões metodológicas que precisam ser resolvidas, ou pelo menos observadas antes de alguma revisão de crenças. Gärdenfors \cite{revisaoGardenfors2} definiu algumas delas.

A primeira é em relação à representação das crenças na base de dados. Vale notar que, como definido no capítulo 2, é necessário o uso de alguma linguagem formal de representação. A maioria das bases de dados trabalha com fatos e regras como formas primitivas de informação. O mecanismo escolhido para a revisão deve levar em conta o formalismo escolhido para a representação.

Uma outra questão se preocupa com os elementos explicitamente representados na base de crenças e os que podem ser derivados desses. Existem bases que dão algum \textit{status} especial aos elementos explícitos, e outras que dão a mesma importância para todos. 

Neste trabalho, apenas os casos que a aceitação de $ \alpha $, pois serão estudados apenas sistemas de crenças logicamente fechados (também conhecidos como bases de crenças), onde vale o equilíbrio epistêmico. O uso de bases de crenças aumenta a eficiência do reparo \cite{revisaoHansson}.  

A última questão é referente a qual retração, ou seja, qual edição fazer na base de dados. A lógica, propriamente dita, não é suficiente para definir quais são os melhores elementos para serem removidos ou mantidos. Uma das ideias referentes a isso é que a quantidade informação perdida durante o reparo seja a mínima possível. 

Nas bases de dados que dão diferentes prioridades para as suas crenças, pode-se remover as que possuem menor prioridade, em detrimento daquelas com maior importância. Tudo isso depende de como a base de crenças está estruturada.

\section{Operações clássicas de Revisão de Crenças}

Existem três operações clássicas de Revisão de Crenças. São elas a expansão, a revisão e a contração. Apenas a expansão é definida diretamente, enquanto as duas últimas são definidas por postulados. 

Para as definições que serão feitas será usada uma lógica $ L $, que é baseada na Lógica de Primeira Ordem. As variáveis, que são as sentenças lógicas, serão representadas pelo alfabeto grego. Os conjuntos de crenças, com letras latinas maiúsculas.

\subsection{Expansão}

A única operação definida diretamente recebe a notação $ K + \alpha $. Ela é também a mais simples, já que representa a chegada de algum conhecimento à base sem que os anteriores sofram modificações. Além disso, as crenças que podem ser inferidas também são adicionadas.

O conjunto resultante é, portanto, formado pelo fecho lógico da união do conjunto inicial com a informação nova, o que significa que $ K + \alpha = \text{Cn}(K + \alpha) $. Vale ressaltar que o conjunto deve permanecer consistente.

A informação $ \alpha $ era indeterminada. Depois da operação de expansão, tal conhecimento passa a ser aceito.

\subsection{Contração}

Esta operação seria o contrário da anterior. Em vez de uma nova informação ser adicionada à base de conhecimento, deseja-se que algum conhecimento seja removido. A operação é caracterizada por $ K - \alpha $. No entanto, as analogias com a expansão acabam por aí.

Como a consistência é um resultado desejável, às vezes, só retirar $ \alpha $ de $ K $ não é suficiente. Nesses casos, é necessário desistir de algumas crenças do conjunto. As sentenças que são abandonadas são aquelas que implicam $ \alpha $. O critério da mudança mínima deve ser aplicado aqui, removendo o mínimo de sentenças possíveis, ou as que possuem prioridade menor.

A informação $ \alpha $, que era aceita, agora é indeterminada, já que foi abandonada. Agora, o conjunto resultante $ K - \alpha $ não possui $ \alpha $ explicitamente nem implicitamente. 

Os postulados de racionalidade que regem a contração seguem abaixo, com uma sucinta explicação sobre o seu significado.

\begin{description}
	\item[Fecho] $ K - \alpha = \text{Cn}(K - \alpha) $ \\ Após a contração, o fecho lógico do conjunto é mantido.
	\item[Inclusão] $ K - \alpha \subseteq K$ \\ A operação não permite que novas sentenças sejam adicionadas ao conjunto, resultando em um conjunto com o mesmo número de sentenças ou menos.
	\item[Vacuidade] Se $ \alpha \notin K $, então $ K - \alpha = K $ \\ Quando a fórmula que se deseja realizar a contração não está no conjunto, o mesmo é inalterado.
	\item[Sucesso] Se $ \alpha \notin \text{Cn}(\varnothing) $, então $ \alpha \notin K - \alpha $ \\ A não ser que $ \alpha $ seja uma tautologia, ela não estará contida no conjunto resultante da operação.
	\item[Equivalência] Se $ \text{Cn}(\alpha) = \text{Cn}(\beta) $, então, $ K - \alpha = K - \beta $ \\ Se duas fórmulas possuem consequências lógicas iguais (são logicamente equivalentes), a contração por uma terá o mesmo resultado do que a contração pela outra, embora $ \alpha \neq \beta $, em alguns casos.
	\item[Recuperação] $ K \subseteq (K - \alpha) + \alpha $ \\ A operação de contração é desfeita pela expansão.
	\item[Intersecção conjuntiva] $ (K - \alpha) \cap (K - \beta) \subseteq K - (\alpha \land \beta) $ \\ As crenças que não foram descartadas na contração por $ \alpha $ ou por $ \beta $ serão mantidas na contração por $ \alpha \land \beta $.
	\item[Inclusão conjuntiva] Se $ \alpha \notin K - (\alpha \land \beta) $ então, $ K - (\alpha \land \beta) \subseteq K - \alpha $ \\ Se a sentença $ \alpha $ é deletada na contração por $  (\alpha \land \beta) $, então tudo o que seria removido na contração por $ \alpha $ apenas, será removido. 
\end{description}

Os seis primeiros postulados são os chamados postulados básicos. Os últimos dois são os postulados suplementares.

Ainda para a contração existem dois construtores especiais definidos, que serão discutidos mais à frente.

\subsection{Revisão}

A revisão, assim como a expansão, tem a ver com adicionar alguma crença $ \alpha $ ao conjunto $ K $. O conjunto resultante é indicado por $ K \ast \alpha $. A nova informação $ \alpha $ era aceita e passa a ser rejeitada, ou vice-versa.

Como na operação anterior, o conjunto anterior precisa se mostrar consistente. Para isso, é necessário apagar o mínimo possível das fórmulas de $ K $. De mesmo modo que a contração, ela não é definida diretamente, mas sim por oito postulados, os seis primeiros, básicos, e os dois últimos, suplementares. São os postulados:

\begin{description}
	\item[Fecho] $ K \ast \alpha = \text{Cn}(K \ast \alpha) $ \\ Após a revisão, o fecho lógico do conjunto é mantido.
	\item[Sucesso] $ \alpha \in \text{Cn}(K \ast \alpha) $ \\ A operação garante que o conjunto resultante contenha a nova informação.
	\item[Inclusão] $ K \ast \alpha \subseteq K + \alpha $ \\ A revisão não adiciona nada a mais do que a expansão adicionaria no conjunto.
	\item[Preservação] Se $ \not \alpha \notin K $, então $ K + \alpha \subseteq K \ast \alpha $ \\ Quando a fórmula que se deseja realizar a revisão não está no conjunto, é garantido que tudo que seria acrescentado na expansão será adicionado na revisão. Juntando esse postulado com o \textbf{Inclusão}, temos que, sendo a revisão feita por uma fórmula logicamente consistente com $ K $, o mesmo resultado seria alcançado por uma expansão, ou seja, $ K + \alpha = K \ast \alpha $. 
	\item[Consistência] $ K \ast \alpha = L \leftrightarrow \lnot \alpha \in \text(Cn)(\varnothing)$ \\ A operação de revisão gera um conjunto consistente, e vice-versa. Neste postulado, $ L $ representa um conjunto consistente qualquer.
	\item[Equivalência] Se $ \text{Cn}(\alpha) = \text{Cn}(\beta) $, então, $ K \ast \alpha = K \ast \beta $ \\ Se duas fórmulas possuem consequências lógicas iguais (são logicamente equivalentes), a revisão por uma terá o mesmo resultado do que a revisão pela outra.
	\item[Conjunção] $ K \ast (\alpha \land \beta) \subseteq (K \ast \alpha) + \beta $ \\ O resultado de revisar pela conjunção de duas fórmulas está contido naquele obtido pela revisão por uma fórmula e posterior expansão pela outra.
	\item[Vacuidade] Se $ \lnot \beta \notin K \ast \alpha $ então, $ (K \ast \alpha) + \beta \subseteq K \ast (\alpha \land \beta) $ \\ Se a negação de $ \beta $ é inconsistente com a revisão por $ \alpha $, então a revisão por $ \alpha $ e posterior expansão por $ \beta $ resulta em um conjunto que está contido no que é obtido pela revisão pela conjunção dessas fórmulas. Unindo com \textbf{Conjunção}, se a revisão $ K \ast \alpha $ for feita e não resultar em $ \not \beta $, e então a expansão por $ \beta $ for realizada, o mesmo resultado seria alcançado pela revisão de $ K $ por $ (\alpha \land \beta) $, ou seja, $ (K \ast \alpha) + \beta = K \ast (\alpha \land \beta) $    
\end{description}

\subsection{Relações entre as operações}

A revisão e a contração podem ser construídas uma em função da outra, como escreveu Gärdenfors \cite{revisaoGardenfors}. Isso pode ser alcançado por duas relações:

\begin{description}
	\item[Identidade de Levi] $ K \ast \alpha = (K - \lnot \alpha) + \alpha $ \\ Ela mostra que a revisão por uma fórmula $ \alpha $ resulta no mesmo conjunto que a contração por $ \lnot \alpha $ e consecutiva expansão por $ \alpha $. Essa é a fórmula da revisão interna. Foi proposto, em 1993 \cite{revisaoHansson2}, a fórmula da revisão externa, que é $ K \ast \alpha = K + \alpha - \lnot \alpha $. Ela significa que primeiro o conhecimento é adicionado à base e então o que o contradiz é removido. Observando as duas fórmulas, pode-se notar que não importa a ordem das operações, desde que seja feita a contração pela negação e a expansão pela afirmação. De qualquer jeito, o resultado será o mesmo do que o da revisão.
	\item[Identidade de Harper] $ K - \alpha = (K \ast \alpha) \cap K $ \\ A contração por uma fórmula pode ser obtida pela intersecção entre o conjunto resultante após uma revisão pela fórmula e o conjunto inicial.
\end{description}

\section{Construtores para a contração}

Existem dois construtores especiais para a contração. Esses construtores são espécies de funções, que tentam passar uma "receita" de como fazer essa operação. Usando a Identidade de Levi, é possível fazê-los para a revisão, também.

\subsection{Contração \textit{Partial Meet}}

\subsubsection{Para Teorias}

Essa construção quer atingir o critério da mudança mínima. Tal critério é atingido por meio da obtenção de conjuntos maximais onde a sentença $ \alpha $ não é válida. A operação fornecerá um resultado baseado em um conjunto de conjuntos maximais, chamado de conjunto-resíduo.

A \textbf{Contração \textit{Partial Meet}} para Teorias é definida da seguinte forma: 

\begin{center}
	$ K -_{\gamma} \alpha = \bigcap \gamma(K \bot \alpha) $
\end{center}

Onde $ -_{\gamma} $ é a operação chamada de contração \textit{partial meet}, $ \gamma $ é uma função de seleção, e $ \bot $ é a representação de um conjunto-resíduo, definidas abaixo:

\begin{description}
	\item[Conjunto-resíduo] Definido como $ T \bot \alpha $, onde $ T $ é um conjunto que está contido na lógica $ L $ e $ \alpha \in L $. Ele é o conjunto de todos os subconjuntos maximais de $ T $ que não implicam $ \alpha $. Formalmente, para quaisquer conjuntos $ R $ e $ S $, o conjunto $ S $ pertence a $ T \bot \alpha $ se e somente se:
	\begin{itemize}
		\item $ S \subseteq T $;
		\item $ \alpha \notin L $;
		\item $ S \subsetneq R \subseteq T \to \alpha \in \text{Cn}(R), \text{ }\forall R$.
	\end{itemize}
	\item[Função de seleção] É uma função $ \gamma $ que seleciona algumas crenças de um conjunto $ T $, ou seja, $ \forall \alpha \in L $:
	\begin{itemize}
		\item $ T \bot \alpha \neq \varnothing \to \varnothing \neq \gamma(T \bot \alpha) \subseteq T \bot \alpha $;
		\item caso contrário, $ \gamma(T \bot \alpha) = \{T\} $.
	\end{itemize}
\end{description}

É possível entender, portanto, que o conjunto resultante da contração \textit{partial meet} é a intersecção dos subconjuntos maximais que não implicam $ \alpha $, escolhidos pela função de seleção $ \gamma $ e são as crenças que o agente acredita de forma mais arraigada. Fazendo uma conexão com os postulados da contração, uma operação $ - $ satisfaz os seis postulados básicos se e somente se $ - $ é uma contração \textit{partial meet}.

\subsubsection{Para Bases de Crenças}

A operação definida acima pode ser generalizada para bases de crenças. Segundo Hansson \cite{revisaoHansson2}, uma operação $ - $ para uma base B é uma contração \textit{partial meet} se e só se satisfaz os seguintes postulados:

\begin{description}
	\item[Inclusão] $ B - \alpha \subseteq B$ \\ A operação não permite que novas sentenças sejam adicionadas ao conjunto, resultando em um conjunto com o mesmo número de sentenças ou menos.
	\item[Sucesso] Se $ \alpha \notin \text{Cn}(\varnothing) $, então $ \alpha \notin B - \alpha $ \\ A não ser que $ \alpha $ seja uma tautologia, ela não estará contida no conjunto resultante da operação. Esse postulado evita que elementos com fortes motivos para a exclusão sejam mantidos.
	\item[Relevância] $ \beta \in B \setminus (B - \alpha) \to \exists. B' \text{ tal que } B - \alpha \subseteq B' \subseteq B $, onde:
	\begin{itemize}
		\item $ \alpha \notin \text{Cn}(B') $
		\item $ \alpha \in \text{Cn}(B' \cup \{\beta\}) $ 
	\end{itemize}
	Se $ \beta $ for removido na contração $ B - \alpha $, então, de alguma maneira, $ \beta $ tem relação com o fato que $ B \vdash \alpha$. Esse postulado assegura que elementos que não possuem bons motivos para a remoção fiquem na base de crenças.
	\item[Uniformidade] Se, $ \forall.B' \subseteq B $, valer que $ \alpha \in \text{Cn}(B') $, se e somente se $ \beta \in \text{Cn}(B') $, então $ B - \alpha = B - \beta $ \\
	Se em todos os subconjuntos de B que implicam $ \alpha $ também for implicado $ \beta $, ou vice-versa, a contração por qualquer uma dessas fórmulas terá o mesmo resultado.
\end{description}

\subsection{Contração \textit{Kernel}}

\subsubsection{Para Teorias}

Assim como a contração \textit{Partial Meet}, a \textit{Kernel} precisa de algumas definições para ser discutida. Ela tenta encontrar conjuntos minimais que implicam a informação $ \alpha $ que se deseja contrair, e então remover pelo menos um elemento de cada um desses conjuntos, para que $ \alpha $ torne-se inválida. 

Ela é definida da seguinte forma:

\begin{center}
	$ K -_{\sigma} \alpha = K \setminus \sigma(K \kcont \alpha) $
\end{center}

Onde $ -_{\sigma} $ é a operação chamada de contração \textit{kernel}, $ sigma $ é uma função de incisão, e $ \kcont $ é a representação de um conjunto-\textit{kernel}, definidas abaixo:

\begin{description}
	\item[Conjunto-\textit{kernel}] Sendo $ K \bot \alpha $, onde $ K $ é um conjunto que está contido na lógica $ L $ e $ \alpha \in L $, o conjunto-\textit{kernel}, denotado por $ K \kcont \alpha $ é o conjunto de todos os subconjuntos minimais de T que implicam $ \alpha $. Formalmente, para quaisquer conjuntos $ I $ e $ J $, $ J $ pertence a $ K \kcont \alpha $ se e somente se:
	\begin{itemize}
		\item $ J \subseteq K $;
		\item $ \alpha \in \text{Cn}Y $;
		\item $ I \subsetneq J \to \alpha \in \text{Cn}(K) $
	\end{itemize} 	
	\item[Função de incisão] É uma função $ \sigma $, para um conjunto de crenças $ K $, que seleciona no mínimo uma fórmula de cada elemento de um conjunto-\textit{kernel}, ou seja, para todo $ \alpha in L $:
	\begin{itemize}
		\item $ \sigma (K \kcont \alpha) \subseteq (K \kcont \alpha) $;
		\item $ J \neq \varnothing \to J \cap \sigma(K \kcont \alpha),\text{ } \forall J \in K \kcont \alpha $
	\end{itemize}
\end{description}

Com isso, pode-se concluir que a função de incisão escolhe, dentre os subconjuntos maximais de $ K $ tais que $ K \vdash \alpha $, os "piores" de cada, de acordo com algum critério arbitrário. As remoções desses escolhidos do conjunto fornece o resultado da operação.

\subsubsection{Para Bases de Crenças}

Asiim como generalização feita para a contração \textit{partial meet} de teorias para bases de crenças, existe uma para a contração \textit{kernel}. Um operador $ - $ para uma base B qualquer pe uma contração \textit{kernel} se e somente se satisfazer os seguintes postulados:

\begin{description}
	\item[Inclusão] $ B - \alpha \subseteq B$ \\ Semelhante ao da contração \textit{partial meet}.
	\item[Sucesso] Se $ \alpha \notin \text{Cn}(\varnothing) $, então $ \alpha \notin B - \alpha $ \\ Funciona como no construtor anterior.
	\item[\textit{Core-retainment}] $ \beta \in B \setminus (B - \alpha) \to \exists. B' \text{ tal que } B' \subseteq B $, onde:
	\begin{itemize}
		\item $ \alpha \notin \text{Cn}(B') $
		\item $ \alpha \in \text{Cn}(B' \cup \{\beta\}) $ 
	\end{itemize}
	Uma versão mais fraca do postulado \textbf{Relevância} apresentado acima.
	\item[Uniformidade] Se, $ \forall.B' \subseteq B $, valer que $ \alpha \in \text{Cn}(B') $, se e somente se $ \beta \in \text{Cn}(B') $, então $ B - \alpha = B - \beta $ \\
	Análogo ao da contração \textit{partial meet}. 
\end{description}